<%= render 'navbar' %>

<div class = 'failed-table'>
<h3><span class="badge badge-danger">Failed Test Case</span></h3>
<%= form_tag('', method: :get, authenticity_token: false, enforce_utf8: false, id: 'date-filter') do %>
<div class="input-group date" data-provide="datepicker">
  <input type="text" name="date" class="form-control" format='yyyy/mm/dd'>
  <div class="input-group-addon">
      <span class="glyphicon glyphicon-time"></span>
  </div>
</div>
<%= button_to("TÃ¬m", {}, {class: 'btn btn-primary'}) %>
<% end %>
<table class="table table-striped" id="testresult-table">
  <thead>
    <tr>
      <th>#</th>
      <th>Test Case Name</th>
      <th>Result</th>
      <th>Last Run</th>
      <th>Environment</th>
      <th>Error Message</th>
    </tr>
  </thead>
  <tbody>
    <% i = 1 %>
    <% @failed_cases.each do |failed_case| %>
      <tr>
        <th scope="row"><%= i %></th>
        <td><%= failed_case.test_case_name %></td>
        <% if failed_case.test_result.downcase == 'passed' %>
          <td><span class="badge badge-success"><%= failed_case.test_result %></span></td>
        <% else %>
          <td><span class="badge badge-danger"><%= failed_case.test_result %></span></td>
        <% end %>
        <td><%= local_time(failed_case.created_at)%></td>
        <td><%= failed_case.environment %></td>
        <td><%= failed_case.error_msg %></td>
      </tr>
      <% i = i + 1 %>
    <% end %>
  </tbody>
</table>
<%= will_paginate(@failed_cases,:param_name => 'failed_page', :renderer => WillPaginate::ActionView::Bootstrap4LinkRenderer) %>
</div>